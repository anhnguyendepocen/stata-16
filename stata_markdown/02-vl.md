^#^ Variable Lists

A common technique in previous versions of Stata was to define a global containing a list of variables to be used later in the document. For example, it was common to see something like this at the top of a Do file:

```
global predictors x1 x2 x3 x4
```

then further down the document something like

```
regress y $predictors
logit z $predictors
```

In Stata 16, Stata has formalized this concept with the addition of the `vl` command (**v**ariable **l**ist). It works similarly to the use of globals: lists of variables are defined, then later reference via the `$name` syntax. However, using `vl` has the benefits of improved organization, customizations unique to variable lists, error checking, and overall convenience.

^#^^#^ Initialization of `vl`

To begin using variable lists, `vl set` must be run.

~~~~
<<dd_do>>
sysuse auto
vl set
<</dd_do>>
~~~~

This produces a surprisingly large amount of output. When you initalize the use of variable lists, Stata will automatically create four variable lists, called the "System variable lists". Every *numeric* variable in the current data set is automatically placed into one of these four lists:

- `vlcategorical`: Variables which Stata thinks are categorical. These generally have to be non-negative, integer valued variables with less than 10 unique values.
- `vlcontinuous`: Variables which Stata thinks are continuous. These generally are variables which have negative values, have non-integer values, or are non-negative intergers with more than 100 unique values.
- `vluncertain`: Variables which Stata is unsure whether they are continuous or categorical. These generally are non-negative interger valued variables with between 10 and 100 unique values.
- `vlother`: Any numeric variables that aren't really useful - either all missing or constant variables.

There is a potential fifth system variable list, `vldummy`, which is created when option `dummy` is passed. Unsurprisingly, this will take variables containing only values 0 and 1 out of `vlcategorical` and into this list.

The "Notes" given below the output are generic; they appear regardardless of how well Stata was able to categorize the variables. They can be suppressed with the `nonotes` option to `vl set`^[My guess is that `nonotes` will become the default in a version or 2, once users become used to `vl`.]

The two thresholds given above, 10 and 100, can be adjusted by the `categorical` and `uncertain` options. For example,

```
vl set, categorical(20) uncertain(50)
```

Running `vl set` on an already `vl`-set data set will result in an error, unless the `clear` option is given, which will re-generate the lists.

~~~~
<<dd_do>>
vl set, dummy nonotes
vl set, dummy nonotes clear
<</dd_do>>
~~~~

In the above, we changed our minds and wanted to include the `vldummy` list, but since we'd already `vl`-set, we had the `clear` the existing set.

^#^^#^ Viewing lists

When initializing the variable lists, we're treated to a nice table of all defined lists. We can replay it via

~~~~
<<dd_do>>
vl dir
<</dd_do>>
~~~~

To see the actual contents of the variable lists, we'll need to sue `vl list`.

~~~~
<<dd_do>>
vl list
<</dd_do>>
~~~~

This output produces one row for each variable *in each variable list it is in*. We haven't used this yet, but variables can be in multiple lists. 

We can list only specific lists:

~~~~
<<dd_do>>
vl list vlcategorical
<</dd_do>>
~~~~

or specific variables

~~~~
<<dd_do>>
vl list (turn weight)
<</dd_do>>
~~~~

If "turn" was in multiple variable lists, each would appear as a row in this output.



^#^^#^^#^ Moving variables in system lists

After initalizing the variable lists, if you plan on using the system lists, you may need to move variables around (e.g. classifying the `vluncertain` variables into their proper lists). This can be done via `vl move` which has the syntax

```
vl move (<variables to move>) <destination list>
```

For example, all the variables in `vluncertain` are actually continous:

```
vl list vluncertain
```

~~~~
<<dd_do>>
vl move (price mpg trunk weight length turn displacement) vlcontinuous
vl dir
<</dd_do>>
~~~~

Alternatively, since we're moving all variables in `vluncertain`, we can see our first use of the variable list!

~~~~
<<dd_do>>
vl set, dummy nonotes clear
vl move ($vluncertain) vlcontinuous
<</dd_do>>
~~~~

Note that variable lists are essentially just global macros so can be referred to via `$<name>`.

^#^^#^ User lists

^#^^#^ Stored Statistics

^#^^#^ Factor variables
